# Doxygen 注释规范

**OpenGeoLab 文档风格** – 生成文档、明确接口、降低维护成本

---

## 1. 核心原则

**注释目的** – 回答以下一项或多项：
1. 这是干什么的？
2. 怎么用？
3. 有什么约束/风险/设计原因？

**禁止：**
- 复述显而易见的代码（`i++; // increment i`）
- 为简单 getter/setter 写注释

---

## 2. 文件注释

**Header 文件（必须）：**
- `@file <文件名>`
- `@brief <职责>`

**Source 文件（可选）：**
- 仅当存在：全局状态、非直观策略、线程/IO 副作用

---

## 3. 类注释

**必须注释：**
- 对外可见类
- 跨模块类

**格式：**
```cpp
/**
 * @brief <职责>
 * <非显然的设计选择>
 */
```

**可省略：** `.cpp` 内部私有实现类

---

## 4. 函数注释

**必须注释条件：**
- 对外 API
- 有副作用（IO/全局状态/线程）
- 参数有约束
- 返回值非显然

**模板：**
```cpp
/**
 * @brief <动作>
 * @param <名称> <约束或语义信息>
 * @return <条件>
 * @note <使用说明>
 * @warning <风险>
 */
```

---

## 5. Doxygen 标签

**块格式：** `/** ... */` 每行以 `*` 开头

**标签规则：**

| 标签 | 用途 | 格式 |
|-----|------|------|
| `@file` | 文件名 | Header 必须 |
| `@brief` | 摘要 | 第三人称、完整短语 |
| `@param` | 参数 | `@param <名称> <非显然信息>` |
| `@return` | 返回值 | 仅非 void/非显然时使用 |
| `@note` | 使用说明 | 可选补充 |
| `@warning` | 风险 | 强调线程安全、前置条件 |

**枚举注释：** 使用 `///<` 作为成员行尾注释

---

## 6. 成员变量

**仅在以下情况注释：**
- 状态机变量
- 线程共享数据
- 位掩码/标志

**格式：** `/// <用途>`

---

## 7. 实现说明（.cpp）

解释**为什么**（非做什么）用于非显然实现：
```cpp
// 选择此方案的理由 vs. 其他方案
```

---

## 8. 批准的标签集

| 标签 | 用途 |
|------|------|
| `@file` | 文件说明 |
| `@brief` | 简要描述 |
| `@param` | 参数 |
| `@return` | 返回值 |
| `@note` | 备注 |
| `@warning` | 风险说明 |

禁止引入未统一的标签。

---

## 9. 一句话规范总结

> **只为接口、约束和设计原因写注释；  
> 不为显而易见的代码写注释。**

---

*This document is intended to evolve with the OpenGeoLab codebase.*

